<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Single_waiter (eio.Eio.Private.Single_waiter)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">eio</a> &#x00BB; <a href="../../index.html">Eio</a> &#x00BB; <a href="../index.html">Private</a> &#x00BB; Single_waiter</nav><header class="odoc-preamble"><h1>Module <code><span>Private.Single_waiter</span></code></h1><p>Allows a single fiber to wait to be notified by another fiber in the same domain. If multiple fibers need to wait at once, or the notification comes from another domain, this can't be used.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a t</span></span></code></div><div class="spec-doc"><p>A handle representing a fiber that might be sleeping. It is either in the Running or Sleeping state.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : <span>unit <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>create ()</code> is a new waiter, initially in the Running state.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-wake"><a href="#val-wake" class="anchor"></a><code><span><span class="keyword">val</span> wake : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'a</span>, exn)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>wake t v</code> resumes <code>t</code>'s fiber with value <code>v</code> and returns <code>true</code> if it was sleeping. If <code>t</code> is Running then this just returns <code>false</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-wake_if_sleeping"><a href="#val-wake_if_sleeping" class="anchor"></a><code><span><span class="keyword">val</span> wake_if_sleeping : <span><span>unit <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>wake_if_sleeping</code> is <code>ignore (wake t (Ok ()))</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-await"><a href="#val-await" class="anchor"></a><code><span><span class="keyword">val</span> await : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>await t op id</code> suspends the calling fiber, changing <code>t</code>'s state to Sleeping. If the fiber is cancelled, a cancel exception is raised. <code>op</code> and <code>id</code> are used for tracing.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-await_protect"><a href="#val-await_protect" class="anchor"></a><code><span><span class="keyword">val</span> await_protect : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>await_protect</code> is like <a href="#val-await"><code>await</code></a>, but the sleep cannot be cancelled.</p></div></div></div></body></html>
