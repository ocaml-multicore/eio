<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Eio_runtime_events (eio.Eio_runtime_events)</title><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">eio</a> &#x00BB; Eio_runtime_events</nav><header class="odoc-preamble"><h1>Module <code><span>Eio_runtime_events</span></code></h1><p>This library is used to write event traces using OCaml's runtime events infrastructure.</p></header><nav class="odoc-toc"><ul><li><a href="#writing-events">Writing events</a></li><li><a href="#consuming-events">Consuming events</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-id"><a href="#type-id" class="anchor"></a><code><span><span class="keyword">type</span> id</span><span> = int</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-ty"><a href="#type-ty" class="anchor"></a><code><span><span class="keyword">type</span> ty</span><span> = </span></code><ol><li id="type-ty.Fiber" class="def variant constructor anchored"><a href="#type-ty.Fiber" class="anchor"></a><code><span>| </span><span><span class="constructor">Fiber</span></span></code></li><li id="type-ty.Promise" class="def variant constructor anchored"><a href="#type-ty.Promise" class="anchor"></a><code><span>| </span><span><span class="constructor">Promise</span></span></code></li><li id="type-ty.Semaphore" class="def variant constructor anchored"><a href="#type-ty.Semaphore" class="anchor"></a><code><span>| </span><span><span class="constructor">Semaphore</span></span></code></li><li id="type-ty.Switch" class="def variant constructor anchored"><a href="#type-ty.Switch" class="anchor"></a><code><span>| </span><span><span class="constructor">Switch</span></span></code></li><li id="type-ty.Stream" class="def variant constructor anchored"><a href="#type-ty.Stream" class="anchor"></a><code><span>| </span><span><span class="constructor">Stream</span></span></code></li><li id="type-ty.Mutex" class="def variant constructor anchored"><a href="#type-ty.Mutex" class="anchor"></a><code><span>| </span><span><span class="constructor">Mutex</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Types of recorded objects.</p><span class="comment-delim">*)</span></div></li></ol></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-ty_to_string"><a href="#val-ty_to_string" class="anchor"></a><code><span><span class="keyword">val</span> ty_to_string : <span><a href="#type-ty">ty</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><h3 id="writing-events"><a href="#writing-events" class="anchor"></a>Writing events</h3><div class="odoc-spec"><div class="spec value anchored" id="val-create"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : <span><span>(<a href="#type-id">id</a> * <a href="#type-ty">ty</a>)</span> <span class="xref-unresolved">Runtime_events</span>.User.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-log"><a href="#val-log" class="anchor"></a><code><span><span class="keyword">val</span> log : <span>string <span class="xref-unresolved">Runtime_events</span>.User.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-name"><a href="#val-name" class="anchor"></a><code><span><span class="keyword">val</span> name : <span><span>(<a href="#type-id">id</a> * string)</span> <span class="xref-unresolved">Runtime_events</span>.User.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-resolve"><a href="#val-resolve" class="anchor"></a><code><span><span class="keyword">val</span> resolve : <span><a href="#type-id">id</a> <span class="xref-unresolved">Runtime_events</span>.User.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-resolve_error"><a href="#val-resolve_error" class="anchor"></a><code><span><span class="keyword">val</span> resolve_error : <span><span>(<a href="#type-id">id</a> * exn)</span> <span class="xref-unresolved">Runtime_events</span>.User.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fiber"><a href="#val-fiber" class="anchor"></a><code><span><span class="keyword">val</span> fiber : <span><a href="#type-id">id</a> <span class="xref-unresolved">Runtime_events</span>.User.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-read"><a href="#val-read" class="anchor"></a><code><span><span class="keyword">val</span> read : <span><a href="#type-id">id</a> <span class="xref-unresolved">Runtime_events</span>.User.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-try_read"><a href="#val-try_read" class="anchor"></a><code><span><span class="keyword">val</span> try_read : <span><a href="#type-id">id</a> <span class="xref-unresolved">Runtime_events</span>.User.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-signal"><a href="#val-signal" class="anchor"></a><code><span><span class="keyword">val</span> signal : <span><a href="#type-id">id</a> <span class="xref-unresolved">Runtime_events</span>.User.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-suspend"><a href="#val-suspend" class="anchor"></a><code><span><span class="keyword">val</span> suspend : <span><span class="xref-unresolved">Runtime_events</span>.Type.span <span class="xref-unresolved">Runtime_events</span>.User.t</span></span></code></div></div><h3 id="consuming-events"><a href="#consuming-events" class="anchor"></a>Consuming events</h3><div class="odoc-spec"><div class="spec type anchored" id="type-handler"><a href="#type-handler" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a handler</span></span><span> = <span>int <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Runtime_events</span>.Timestamp.t <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>A <code>'a handler</code> is a function for handling events of type <code>'a</code>. It is called as <code>handler ring_id ts value</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add_callbacks"><a href="#val-add_callbacks" class="anchor"></a><code><span><span class="keyword">val</span> add_callbacks : 
  <span>?create:<span><span>(<a href="#type-id">id</a> * <a href="#type-ty">ty</a>)</span> <a href="#type-handler">handler</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>?read:<span><a href="#type-id">id</a> <a href="#type-handler">handler</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>?try_read:<span><a href="#type-id">id</a> <a href="#type-handler">handler</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>?resolve:<span><a href="#type-id">id</a> <a href="#type-handler">handler</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>?resolve_error:<span><span>(<a href="#type-id">id</a> * string)</span> <a href="#type-handler">handler</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>?name:<span><span>(<a href="#type-id">id</a> * string)</span> <a href="#type-handler">handler</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>?log:<span>string <a href="#type-handler">handler</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>?fiber:<span><a href="#type-id">id</a> <a href="#type-handler">handler</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>?signal:<span><a href="#type-id">id</a> <a href="#type-handler">handler</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>?suspend:<span><span class="xref-unresolved">Runtime_events</span>.Type.span <a href="#type-handler">handler</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Runtime_events</span>.Callbacks.t <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Runtime_events</span>.Callbacks.t</span></code></div></div></div></body></html>