<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Backend (eio.Eio_mock.Backend)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">eio</a> &#x00BB; <a href="../index.html">Eio_mock</a> &#x00BB; Backend</nav><header class="odoc-preamble"><h1>Module <code><span>Eio_mock.Backend</span></code></h1><p>A dummy Eio backend with no actual IO.</p><p>This backend does not support the use of multiple domains or systhreads, but the tradeoff is that it can reliably detect deadlock, because if the run queue is empty then it knows that no wake up event can be coming from elsewhere.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec exception anchored" id="exception-Deadlock_detected"><a href="#exception-Deadlock_detected" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Deadlock_detected</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-run"><a href="#val-run" class="anchor"></a><code><span><span class="keyword">val</span> run : <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>run fn</code> runs an event loop and then calls <code>fn env</code> within it.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-Deadlock_detected"><code>Deadlock_detected</code></a> <p>if the run queue becomes empty but <code>fn</code> hasn't returned.</p></li></ul></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-stdenv"><a href="#type-stdenv" class="anchor"></a><code><span><span class="keyword">type</span> stdenv</span><span> =
  <span>&lt; clock : <a href="../Clock/index.html#type-t">Clock.t</a>
  ; mono_clock : <a href="../Clock/Mono/index.html#type-t">Clock.Mono.t</a>
  ; debug : <a href="../../Eio/Debug/index.html#type-t">Eio.Debug.t</a>
  ; backend_id : string &gt;</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-run_full"><a href="#val-run_full" class="anchor"></a><code><span><span class="keyword">val</span> run_full : <span><span>(<span><a href="#type-stdenv">stdenv</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>run_full</code> is like <a href="#val-run"><code>run</code></a> but also provides a mock environment.</p><p>The mock monotonic clock it provides advances automatically when there is nothing left to do. The mock wall clock is linked directly to the monotonic time.</p></div></div></div></body></html>
